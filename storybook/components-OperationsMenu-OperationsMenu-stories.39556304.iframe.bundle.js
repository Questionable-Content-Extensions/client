(self.webpackChunkquestionable_content_spa=self.webpackChunkquestionable_content_spa||[]).push([[4918],{"./node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";function _objectDestructuringEmpty(obj){if(null==obj)throw new TypeError("Cannot destructure "+obj)}__webpack_require__.d(__webpack_exports__,{Z:function(){return _objectDestructuringEmpty}})},"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return _slicedToArray}});var unsupportedIterableToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||(0,unsupportedIterableToArray.Z)(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},"./src/components/OperationsMenu/OperationsMenu.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return OperationsMenu_stories}});var _ref2,_testMenuItem,_Default$parameters,_Default$parameters2,_Default$parameters2$,regeneratorRuntime=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),comicSlice=__webpack_require__("./src/store/comicSlice.ts"),dialogSlice=__webpack_require__("./src/store/dialogSlice.ts"),store=__webpack_require__("./src/store/store.ts"),dist=__webpack_require__("./node_modules/@storybook/jest/dist/index.mjs"),testing_library_dist=__webpack_require__("./node_modules/@storybook/testing-library/dist/index.mjs"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),objectDestructuringEmpty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js"),react=__webpack_require__("./node_modules/react/index.js"),hooks=__webpack_require__("./src/store/hooks.ts"),Popup=__webpack_require__("./src/components/Popup.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function OperationsMenu(_ref){(0,objectDestructuringEmpty.Z)(_ref);var dispatch=(0,hooks.T)(),currentComic=(0,hooks.C)((function(state){return state.comic.current})),_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),showPopup=_useState2[0],setShowPopup=_useState2[1],_useState3=(0,react.useState)([0,0]),_useState4=(0,slicedToArray.Z)(_useState3,2),popupPosition=_useState4[0],setPopupPosition=_useState4[1];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("button",{title:"Additional operations",className:"flex-none px-1 block text-xs text-black hover:text-gray-500 focus:text-black visited:text-black border-solid border-l border-stone-300",onClick:function onClick(e){e.preventDefault(),setShowPopup(!0);var target=e.currentTarget;setPopupPosition([target.offsetLeft+target.clientWidth/2,target.offsetTop+target.clientHeight/2])},children:(0,jsx_runtime.jsx)("i",{className:"fa fa-ellipsis-h text-xl leading-5","aria-hidden":!0})}),(0,jsx_runtime.jsx)(Popup.Z,{show:showPopup,onClose:function onClose(){return setShowPopup(!1)},position:popupPosition,children:(0,jsx_runtime.jsxs)("div",{className:"px-2 py-1 bg-stone-100 border border-solid border-stone-300 w-72 flex flex-col content-start gap-2 relative",children:[(0,jsx_runtime.jsx)(MenuItem,{onClick:function onClick(){setShowPopup(!1),dispatch((0,dialogSlice.RS)(currentComic))},children:"Copy items from another comic..."}),(0,jsx_runtime.jsx)("hr",{className:"-mx-2 my-0 border-solid border-b max-w-none"}),(0,jsx_runtime.jsxs)(MenuItem,{onClick:function onClick(){setShowPopup(!1),dispatch((0,dialogSlice.I4)(currentComic))},children:["Show edit log for comic ",currentComic,"..."]}),(0,jsx_runtime.jsx)(MenuItem,{onClick:function onClick(){setShowPopup(!1),dispatch((0,dialogSlice.I4)(!0))},children:"Show edit log..."})]})})]})}function MenuItem(_ref2){var children=_ref2.children,_onClick=_ref2.onClick;return(0,jsx_runtime.jsx)("button",{className:"text-left hover:bg-blue-600 hover:text-white -mx-2 -my-1 p-2",onClick:function onClick(e){e.preventDefault(),_onClick()},children:children})}try{OperationsMenu.displayName="OperationsMenu",OperationsMenu.__docgenInfo={description:"",displayName:"OperationsMenu",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/OperationsMenu/OperationsMenu.tsx#OperationsMenu"]={docgenInfo:OperationsMenu.__docgenInfo,name:"OperationsMenu",path:"src/components/OperationsMenu/OperationsMenu.tsx#OperationsMenu"})}catch(__react_docgen_typescript_loader_error){}var OperationsMenu_stories={component:OperationsMenu},OperationsMenu_stories_store=(0,store.n)(),Default=function Template(args){var origDispatch=OperationsMenu_stories_store.dispatch;return OperationsMenu_stories_store.dispatch=dist.e.fn(origDispatch),0===OperationsMenu_stories_store.getState().comic.current&&OperationsMenu_stories_store.dispatch((0,comicSlice.wJ)(666)),(0,jsx_runtime.jsx)(es.zt,{store:OperationsMenu_stories_store,children:(0,jsx_runtime.jsx)(OperationsMenu,(0,objectSpread2.Z)({},args))})}.bind({});function testMenuItem(_x2,_x3,_x4){return(_testMenuItem=_testMenuItem||(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee5(canvasElement,menuText,expectedDispatchedAction){var canvas,menuButton;return(0,regeneratorRuntime.Z)().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return canvas=(0,testing_library_dist.uh)(canvasElement),_context5.next=3,(0,testing_library_dist.X_)((0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee2(){return(0,regeneratorRuntime.Z)().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:(0,dist.l)(canvas.queryByText(menuText)).not.toBeInTheDocument();case 1:case"end":return _context2.stop()}}),_callee2)}))));case 3:return menuButton=canvas.getByRole("button"),_context5.next=6,testing_library_dist.mV.click(menuButton);case 6:return _context5.next=8,(0,testing_library_dist.X_)((0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee3(){return(0,regeneratorRuntime.Z)().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:(0,dist.l)(canvas.getByText(menuText)).toBeInTheDocument();case 1:case"end":return _context3.stop()}}),_callee3)}))));case 8:return _context5.next=10,testing_library_dist.mV.click(canvas.getByText(menuText));case 10:return(0,dist.l)(OperationsMenu_stories_store.dispatch).toHaveBeenCalledWith(expectedDispatchedAction),_context5.next=13,(0,testing_library_dist.X_)((0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee4(){return(0,regeneratorRuntime.Z)().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:(0,dist.l)(canvas.queryByText(menuText)).not.toBeInTheDocument();case 1:case"end":return _context4.stop()}}),_callee4)}))));case 13:case"end":return _context5.stop()}}),_callee5)})))).apply(this,arguments)}Default.play=function(_x){return(_ref2=_ref2||(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee(_ref){var canvasElement;return(0,regeneratorRuntime.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return canvasElement=_ref.canvasElement,_ref.args,_context.next=3,testMenuItem(canvasElement,"Copy items from another comic...",(0,dialogSlice.RS)(666));case 3:return _context.next=5,testMenuItem(canvasElement,"Show edit log for comic 666...",(0,dialogSlice.I4)(666));case 5:return _context.next=7,testMenuItem(canvasElement,"Show edit log...",(0,dialogSlice.I4)(!0));case 7:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)},Default.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},Default.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:(0,objectSpread2.Z)({originalSource:"args => {\n  const origDispatch = store.dispatch;\n  store.dispatch = (jest.fn(origDispatch) as any);\n  // Let's set up the Redux store to be the way we need\n  const state = store.getState();\n  if (state.comic.current === 0) {\n    store.dispatch(setCurrentComic(666));\n  }\n  return <Provider store={store}>\n            <OperationsMenu {...args} />\n        </Provider>;\n}"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2$=_Default$parameters2.docs)||void 0===_Default$parameters2$?void 0:_Default$parameters2$.source)})});var __namedExportsOrder=["Default"]},"./src/components/Popup.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Popup}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");function Popup(_ref){var show=_ref.show,onClose=_ref.onClose,children=_ref.children,position=_ref.position,preventClose=_ref.preventClose;return show&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"absolute z-[2] pt-2",style:{left:position&&position[0],top:position&&position[1]},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"fixed inset-0",onClick:function onClick(e){e.preventDefault(),preventClose||onClose()}}),children]})}try{Popup.displayName="Popup",Popup.__docgenInfo={description:"",displayName:"Popup",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},position:{defaultValue:null,description:"",name:"position",required:!1,type:{name:"[number, number]"}},preventClose:{defaultValue:null,description:"",name:"preventClose",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Popup.tsx#Popup"]={docgenInfo:Popup.__docgenInfo,name:"Popup",path:"src/components/Popup.tsx#Popup"})}catch(__react_docgen_typescript_loader_error){}},"./src/store/hooks.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{C:function(){return useAppSelector},T:function(){return useAppDispatch}});var react_redux__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-redux/es/index.js"),useAppDispatch=function useAppDispatch(){return(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.I0)()},useAppSelector=react_redux__WEBPACK_IMPORTED_MODULE_0__.v9},"?4f7e":function(){}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy1PcGVyYXRpb25zTWVudS1PcGVyYXRpb25zTWVudS1zdG9yaWVzLjU2YjhhOWUwLmlmcmFtZS5idW5kbGUuanMiLCJtYXBwaW5ncyI6InVRQUFlLFNBQVNBLDBCQUEwQkMsS0FDaEQsR0FBVyxNQUFQQSxJQUFhLE1BQU0sSUFBSUMsVUFBVSxzQkFBd0JELElBQy9ELEMsZ2NDRWUsU0FBU0UsZUFBZUMsSUFBS0MsR0FDMUMsT0NMYSxTQUFTQyxnQkFBZ0JGLEtBQ3RDLEdBQUlHLE1BQU1DLFFBQVFKLEtBQU0sT0FBT0EsR0FDakMsQ0RHUyxDQUFlQSxNRUxULFNBQVNLLHNCQUFzQkMsRUFBR0MsR0FDL0MsSUFBSUMsRUFBSSxNQUFRRixFQUFJLEtBQU8sb0JBQXNCRyxRQUFVSCxFQUFFRyxPQUFPQyxXQUFhSixFQUFFLGNBQ25GLEdBQUksTUFBUUUsRUFBRyxDQUNiLElBQUlHLEVBQ0ZDLEVBQ0FYLEVBQ0FZLEVBQ0FDLEVBQUksR0FDSkMsR0FBSSxFQUNKQyxHQUFJLEVBQ04sSUFDRSxHQUFJZixHQUFLTyxFQUFJQSxFQUFFUyxLQUFLWCxJQUFJWSxLQUFNLElBQU1YLEVBQUcsQ0FDckMsR0FBSVksT0FBT1gsS0FBT0EsRUFBRyxPQUNyQk8sR0FBSSxDQUNOLE1BQU8sT0FBU0EsR0FBS0osRUFBSVYsRUFBRWdCLEtBQUtULElBQUlZLFFBQVVOLEVBQUVPLEtBQUtWLEVBQUVXLE9BQVFSLEVBQUVTLFNBQVdoQixHQUFJUSxHQUFJLEdBQ3RGLENBQUUsTUFBT1QsR0FDUFUsR0FBSSxFQUFJSixFQUFJTixDQUNkLENBQUUsUUFDQSxJQUNFLElBQUtTLEdBQUssTUFBUVAsRUFBVSxTQUFNSyxFQUFJTCxFQUFVLFNBQUtXLE9BQU9OLEtBQU9BLEdBQUksTUFDekUsQ0FBRSxRQUNBLEdBQUlHLEVBQUcsTUFBTUosQ0FDZixDQUNGLENBQ0EsT0FBT0UsQ0FDVCxDQUNGLENGckJnQyxDQUFxQmQsSUFBS0MsS0FBTSxFQUFBdUIsMkJBQUEsR0FBMkJ4QixJ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aUIsU0FBakJBLGlCQUFjLE9BQVN5QyxFQUFBQSx5Q0FBQUEsS0FBMEIsRUFDakR2QyxlQUFrRHdDLHlDQUFBQSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcXVlc3Rpb25hYmxlLWNvbnRlbnQtc3BhLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdERlc3RydWN0dXJpbmdFbXB0eS5qcyIsIndlYnBhY2s6Ly9xdWVzdGlvbmFibGUtY29udGVudC1zcGEvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheS5qcyIsIndlYnBhY2s6Ly9xdWVzdGlvbmFibGUtY29udGVudC1zcGEvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXJyYXlXaXRoSG9sZXMuanMiLCJ3ZWJwYWNrOi8vcXVlc3Rpb25hYmxlLWNvbnRlbnQtc3BhLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2l0ZXJhYmxlVG9BcnJheUxpbWl0LmpzIiwid2VicGFjazovL3F1ZXN0aW9uYWJsZS1jb250ZW50LXNwYS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9ub25JdGVyYWJsZVJlc3QuanMiLCJ3ZWJwYWNrOi8vcXVlc3Rpb25hYmxlLWNvbnRlbnQtc3BhLy4vc3JjL2NvbXBvbmVudHMvT3BlcmF0aW9uc01lbnUvT3BlcmF0aW9uc01lbnUudHN4Iiwid2VicGFjazovL3F1ZXN0aW9uYWJsZS1jb250ZW50LXNwYS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLnRzeCIsIndlYnBhY2s6Ly9xdWVzdGlvbmFibGUtY29udGVudC1zcGEvLi9zcmMvc3RvcmUvaG9va3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShvYmopIHtcbiAgaWYgKG9iaiA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGRlc3RydWN0dXJlIFwiICsgb2JqKTtcbn0iLCJpbXBvcnQgYXJyYXlXaXRoSG9sZXMgZnJvbSBcIi4vYXJyYXlXaXRoSG9sZXMuanNcIjtcbmltcG9ydCBpdGVyYWJsZVRvQXJyYXlMaW1pdCBmcm9tIFwiLi9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qc1wiO1xuaW1wb3J0IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IGZyb20gXCIuL3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5LmpzXCI7XG5pbXBvcnQgbm9uSXRlcmFibGVSZXN0IGZyb20gXCIuL25vbkl0ZXJhYmxlUmVzdC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gIHJldHVybiBhcnJheVdpdGhIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBub25JdGVyYWJsZVJlc3QoKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGwpIHtcbiAgdmFyIHQgPSBudWxsID09IHIgPyBudWxsIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIHJbU3ltYm9sLml0ZXJhdG9yXSB8fCByW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKG51bGwgIT0gdCkge1xuICAgIHZhciBlLFxuICAgICAgbixcbiAgICAgIGksXG4gICAgICB1LFxuICAgICAgYSA9IFtdLFxuICAgICAgZiA9ICEwLFxuICAgICAgbyA9ICExO1xuICAgIHRyeSB7XG4gICAgICBpZiAoaSA9ICh0ID0gdC5jYWxsKHIpKS5uZXh0LCAwID09PSBsKSB7XG4gICAgICAgIGlmIChPYmplY3QodCkgIT09IHQpIHJldHVybjtcbiAgICAgICAgZiA9ICExO1xuICAgICAgfSBlbHNlIGZvciAoOyAhKGYgPSAoZSA9IGkuY2FsbCh0KSkuZG9uZSkgJiYgKGEucHVzaChlLnZhbHVlKSwgYS5sZW5ndGggIT09IGwpOyBmID0gITApO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgIG8gPSAhMCwgbiA9IHI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghZiAmJiBudWxsICE9IHRbXCJyZXR1cm5cIl0gJiYgKHUgPSB0W1wicmV0dXJuXCJdKCksIE9iamVjdCh1KSAhPT0gdSkpIHJldHVybjtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChvKSB0aHJvdyBuO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59IiwiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcblxuaW1wb3J0IHtcbiAgICBzZXRTaG93Q29weUl0ZW1zRGlhbG9nLFxuICAgIHNldFNob3dFZGl0TG9nRGlhbG9nLFxufSBmcm9tICdAc3RvcmUvZGlhbG9nU2xpY2UnXG5pbXBvcnQgeyB1c2VBcHBEaXNwYXRjaCwgdXNlQXBwU2VsZWN0b3IgfSBmcm9tICdAc3RvcmUvaG9va3MnXG5cbmltcG9ydCBQb3B1cCBmcm9tICcuLi9Qb3B1cCdcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5LXBhdHRlcm5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE9wZXJhdGlvbnNNZW51KHt9OiB7fSkge1xuICAgIGNvbnN0IGRpc3BhdGNoID0gdXNlQXBwRGlzcGF0Y2goKVxuXG4gICAgY29uc3QgY3VycmVudENvbWljID0gdXNlQXBwU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS5jb21pYy5jdXJyZW50KVxuXG4gICAgY29uc3QgW3Nob3dQb3B1cCwgc2V0U2hvd1BvcHVwXSA9IHVzZVN0YXRlKGZhbHNlKVxuICAgIGNvbnN0IFtwb3B1cFBvc2l0aW9uLCBzZXRQb3B1cFBvc2l0aW9uXSA9IHVzZVN0YXRlPFtudW1iZXIsIG51bWJlcl0+KFswLCAwXSlcbiAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIHRpdGxlPVwiQWRkaXRpb25hbCBvcGVyYXRpb25zXCJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LW5vbmUgcHgtMSBibG9jayB0ZXh0LXhzIHRleHQtYmxhY2sgaG92ZXI6dGV4dC1ncmF5LTUwMCBmb2N1czp0ZXh0LWJsYWNrIHZpc2l0ZWQ6dGV4dC1ibGFjayBib3JkZXItc29saWQgYm9yZGVyLWwgYm9yZGVyLXN0b25lLTMwMFwiXG4gICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgIHNldFNob3dQb3B1cCh0cnVlKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXRcbiAgICAgICAgICAgICAgICAgICAgc2V0UG9wdXBQb3NpdGlvbihbXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQub2Zmc2V0TGVmdCArIHRhcmdldC5jbGllbnRXaWR0aCAvIDIsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQub2Zmc2V0VG9wICsgdGFyZ2V0LmNsaWVudEhlaWdodCAvIDIsXG4gICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmYSBmYS1lbGxpcHNpcy1oIHRleHQteGwgbGVhZGluZy01XCJcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW5cbiAgICAgICAgICAgICAgICA+PC9pPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8UG9wdXBcbiAgICAgICAgICAgICAgICBzaG93PXtzaG93UG9wdXB9XG4gICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0U2hvd1BvcHVwKGZhbHNlKX1cbiAgICAgICAgICAgICAgICBwb3NpdGlvbj17cG9wdXBQb3NpdGlvbn1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB4LTIgcHktMSBiZy1zdG9uZS0xMDAgYm9yZGVyIGJvcmRlci1zb2xpZCBib3JkZXItc3RvbmUtMzAwIHctNzIgZmxleCBmbGV4LWNvbCBjb250ZW50LXN0YXJ0IGdhcC0yIHJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxNZW51SXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3dQb3B1cChmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChzZXRTaG93Q29weUl0ZW1zRGlhbG9nKGN1cnJlbnRDb21pYykpXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICBDb3B5IGl0ZW1zIGZyb20gYW5vdGhlciBjb21pYy4uLlxuICAgICAgICAgICAgICAgICAgICA8L01lbnVJdGVtPlxuICAgICAgICAgICAgICAgICAgICA8aHIgY2xhc3NOYW1lPVwiLW14LTIgbXktMCBib3JkZXItc29saWQgYm9yZGVyLWIgbWF4LXctbm9uZVwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDxNZW51SXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFNob3dQb3B1cChmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaChzZXRTaG93RWRpdExvZ0RpYWxvZyhjdXJyZW50Q29taWMpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgU2hvdyBlZGl0IGxvZyBmb3IgY29taWMge2N1cnJlbnRDb21pY30uLi5cbiAgICAgICAgICAgICAgICAgICAgPC9NZW51SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgPE1lbnVJdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2hvd1BvcHVwKGZhbHNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKHNldFNob3dFZGl0TG9nRGlhbG9nKHRydWUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgU2hvdyBlZGl0IGxvZy4uLlxuICAgICAgICAgICAgICAgICAgICA8L01lbnVJdGVtPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9Qb3B1cD5cbiAgICAgICAgPC8+XG4gICAgKVxufVxuXG5mdW5jdGlvbiBNZW51SXRlbSh7XG4gICAgY2hpbGRyZW4sXG4gICAgb25DbGljayxcbn06IHtcbiAgICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlXG4gICAgb25DbGljazogKCkgPT4gdm9pZFxufSkge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtbGVmdCBob3ZlcjpiZy1ibHVlLTYwMCBob3Zlcjp0ZXh0LXdoaXRlIC1teC0yIC1teS0xIHAtMlwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgIG9uQ2xpY2soKVxuICAgICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L2J1dHRvbj5cbiAgICApXG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQb3B1cCh7XG4gICAgc2hvdyxcbiAgICBvbkNsb3NlLFxuICAgIGNoaWxkcmVuLFxuICAgIHBvc2l0aW9uLFxuICAgIHByZXZlbnRDbG9zZSxcbn06IHtcbiAgICBzaG93OiBib29sZWFuXG4gICAgb25DbG9zZTogKCkgPT4gdm9pZFxuICAgIGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGVcbiAgICBwb3NpdGlvbj86IFtudW1iZXIsIG51bWJlcl1cbiAgICBwcmV2ZW50Q2xvc2U/OiBib29sZWFuXG59KSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgc2hvdyAmJiAoXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHotWzJdIHB0LTJcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHBvc2l0aW9uICYmIHBvc2l0aW9uWzBdLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IHBvc2l0aW9uICYmIHBvc2l0aW9uWzFdLFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMFwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcHJldmVudENsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIClcbiAgICApXG59XG4iLCJpbXBvcnQgeyBUeXBlZFVzZVNlbGVjdG9ySG9vaywgdXNlRGlzcGF0Y2gsIHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnXG5cbmltcG9ydCB0eXBlIHsgQXBwRGlzcGF0Y2gsIFJvb3RTdGF0ZSB9IGZyb20gJy4vc3RvcmUnXG5cbi8vIFVzZSB0aHJvdWdob3V0IHlvdXIgYXBwIGluc3RlYWQgb2YgcGxhaW4gYHVzZURpc3BhdGNoYCBhbmQgYHVzZVNlbGVjdG9yYFxuZXhwb3J0IGNvbnN0IHVzZUFwcERpc3BhdGNoID0gKCkgPT4gdXNlRGlzcGF0Y2g8QXBwRGlzcGF0Y2g+KClcbmV4cG9ydCBjb25zdCB1c2VBcHBTZWxlY3RvcjogVHlwZWRVc2VTZWxlY3Rvckhvb2s8Um9vdFN0YXRlPiA9IHVzZVNlbGVjdG9yXG4iXSwibmFtZXMiOlsiX29iamVjdERlc3RydWN0dXJpbmdFbXB0eSIsIm9iaiIsIlR5cGVFcnJvciIsIl9zbGljZWRUb0FycmF5IiwiYXJyIiwiaSIsIl9hcnJheVdpdGhIb2xlcyIsIkFycmF5IiwiaXNBcnJheSIsIl9pdGVyYWJsZVRvQXJyYXlMaW1pdCIsInIiLCJsIiwidCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiZSIsIm4iLCJ1IiwiYSIsImYiLCJvIiwiY2FsbCIsIm5leHQiLCJPYmplY3QiLCJkb25lIiwicHVzaCIsInZhbHVlIiwibGVuZ3RoIiwidW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJfbm9uSXRlcmFibGVSZXN0IiwiT3BlcmF0aW9uc01lbnUiLCJfcmVmIiwiZGlzcGF0Y2giLCJ1c2VBcHBEaXNwYXRjaCIsImN1cnJlbnRDb21pYyIsInVzZUFwcFNlbGVjdG9yIiwic3RhdGUiLCJjb21pYyIsImN1cnJlbnQiLCJfdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsIl91c2VTdGF0ZTIiLCJzaG93UG9wdXAiLCJzZXRTaG93UG9wdXAiLCJfdXNlU3RhdGUzIiwiX3VzZVN0YXRlNCIsInBvcHVwUG9zaXRpb24iLCJzZXRQb3B1cFBvc2l0aW9uIiwiX2pzeHMiLCJfRnJhZ21lbnQiLCJjaGlsZHJlbiIsIl9qc3giLCJ0aXRsZSIsImNsYXNzTmFtZSIsIm9uQ2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJvZmZzZXRMZWZ0IiwiY2xpZW50V2lkdGgiLCJvZmZzZXRUb3AiLCJjbGllbnRIZWlnaHQiLCJQb3B1cCIsInNob3ciLCJvbkNsb3NlIiwicG9zaXRpb24iLCJNZW51SXRlbSIsInNldFNob3dDb3B5SXRlbXNEaWFsb2ciLCJzZXRTaG93RWRpdExvZ0RpYWxvZyIsIl9yZWYyIiwicHJldmVudENsb3NlIiwic3R5bGUiLCJsZWZ0IiwidG9wIiwidXNlRGlzcGF0Y2giLCJ1c2VTZWxlY3RvciJdLCJzb3VyY2VSb290IjoiIn0=