"use strict";(self.webpackChunkquestionable_content_spa=self.webpackChunkquestionable_content_spa||[]).push([[3187],{"./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_require__.d(__webpack_exports__,{Z:function(){return _objectWithoutProperties}})},"./src/components/CopyItemsDialog/CopyItemsDialog.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return CopyItemsDialog_stories}});var _Default$parameters,_Default$parameters2,_Default$parameters2$,objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),apiSlice=__webpack_require__("./src/store/apiSlice.ts"),comicSlice=__webpack_require__("./src/store/comicSlice.ts"),dialogSlice=__webpack_require__("./src/store/dialogSlice.ts"),store=__webpack_require__("./src/store/store.ts"),mocks=__webpack_require__("./src/mocks.ts"),regeneratorRuntime=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),createForOfIteratorHelper=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),Button=__webpack_require__("./src/components/Button.tsx"),useHydratedItemData=__webpack_require__("./src/hooks/useHydratedItemData.ts"),ModalDialog=__webpack_require__("./src/components/Modals/ModalDialog/ModalDialog.tsx"),rtk_query_cjs_production_min=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/query/rtk-query.cjs.production.min.js"),comicApiSlice=__webpack_require__("./src/store/api/comicApiSlice.ts"),hooks=__webpack_require__("./src/store/hooks.ts"),CopyItemsDialogPanel=__webpack_require__("./src/components/CopyItemsDialog/CopyItemsDialogPanel/CopyItemsDialogPanel.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function CopyItemsDialog(_ref){var _ref2,show=_ref.show,onClose=_ref.onClose,settings=(0,hooks.C)((function(state){return state.settings.values})),currentComic=(0,hooks.C)((function(state){return state.comic.current})),initialComic=(0,hooks.C)((function(state){return state.dialog.showCopyItemsDialogFor})),_useListAllQuery=(0,comicApiSlice.bt)(show?void 0:rtk_query_cjs_production_min.skipToken),allComicData=_useListAllQuery.data,isFetchingAllComicData=_useListAllQuery.isFetching,isLoadingAllComicData=_useListAllQuery.isLoading,reverseAllComicData=(0,react.useMemo)((function(){if(allComicData){var _reverseAllComicData=(0,toConsumableArray.Z)(allComicData);return _reverseAllComicData.reverse(),_reverseAllComicData}}),[allComicData]),_useState=(0,react.useState)(initialComic),_useState2=(0,slicedToArray.Z)(_useState,2),previousInitialComic=_useState2[0],setPreviousInitialComic=_useState2[1],_useState3=(0,react.useState)(previousInitialComic),_useState4=(0,slicedToArray.Z)(_useState3,2),selectedComic=_useState4[0],setSelectedComic=_useState4[1];previousInitialComic!==initialComic?(setPreviousInitialComic(initialComic),initialComic&&setSelectedComic(initialComic>1?initialComic-1:initialComic)):!selectedComic&&reverseAllComicData&&setSelectedComic(reverseAllComicData[0].comic);var _useHydratedItemData=(0,useHydratedItemData.Z)(null!=selectedComic?selectedComic:0,settings),comicItems=_useHydratedItemData.comicItems,isLoadingInitialItemData=_useHydratedItemData.isLoading,isFetchingItemData=_useHydratedItemData.isFetching,_useState5=(0,react.useState)({}),_useState6=(0,slicedToArray.Z)(_useState5,2),selectedItems=_useState6[0],setSelectedItems=_useState6[1];(0,react.useEffect)((function(){var selectedItems={};if(comicItems){var _step,_iterator=(0,createForOfIteratorHelper.Z)(comicItems);try{for(_iterator.s();!(_step=_iterator.n()).done;){selectedItems[_step.value.id]=!0}}catch(err){_iterator.e(err)}finally{_iterator.f()}setSelectedItems(selectedItems)}}),[comicItems]);var _useAddItemsMutation=(0,comicApiSlice.Bb)(),_useAddItemsMutation2=(0,slicedToArray.Z)(_useAddItemsMutation,2),addItems=_useAddItemsMutation2[0],isAddingItems=_useAddItemsMutation2[1].isLoading;return(0,jsx_runtime.jsx)(ModalDialog.Z,{onCloseClicked:onClose,header:(0,jsx_runtime.jsx)("h5",{className:"m-0 text-xl font-medium leading-normal text-gray-800",children:"Copy items from another comic"}),body:(0,jsx_runtime.jsx)(CopyItemsDialogPanel.Z,{allComics:reverseAllComicData,isLoading:isLoadingAllComicData||isLoadingInitialItemData,isFetching:isFetchingAllComicData||isFetchingItemData||isAddingItems,selectedComic:null!=selectedComic?selectedComic:void 0,comicItems:comicItems,onChangeSelectedComic:setSelectedComic,selectedItems:selectedItems,onUpdateSelectedItems:setSelectedItems}),footer:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Button.g,{onClick:function onCopy(){return(_ref2=_ref2||(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee(){var itemsToAdd,item;return(0,regeneratorRuntime.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:for(item in itemsToAdd=[],selectedItems)selectedItems[item]&&itemsToAdd.push(Number(item));return _context.next=4,addItems({token:settings.editModeToken,comicId:currentComic,items:itemsToAdd.map((function(itemId){return{new:!1,itemId:itemId}}))});case 4:"data"in _context.sent&&onClose();case 6:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)},children:"Copy selected into current comic"}),(0,jsx_runtime.jsx)(Button.g,{onClick:onClose,children:"Close"})]})})}try{CopyItemsDialog.displayName="CopyItemsDialog",CopyItemsDialog.__docgenInfo={description:"",displayName:"CopyItemsDialog",props:{show:{defaultValue:null,description:"",name:"show",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/CopyItemsDialog/CopyItemsDialog.tsx#CopyItemsDialog"]={docgenInfo:CopyItemsDialog.__docgenInfo,name:"CopyItemsDialog",path:"src/components/CopyItemsDialog/CopyItemsDialog.tsx#CopyItemsDialog"})}catch(__react_docgen_typescript_loader_error){}var CopyItemsDialog_stories={component:CopyItemsDialog,argTypes:{show:{table:{disable:!0}}}},Default=function Template(args){var mswReady=(0,mocks.rd)();store.Z.dispatch(apiSlice.gk.util.resetApiState());var state=store.Z.getState();state.dialog.showCopyItemsDialogFor||store.Z.dispatch((0,dialogSlice.RS)(666)),667!==state.comic.current&&store.Z.dispatch((0,comicSlice.wJ)(667));var _window$msw=window.msw,worker=_window$msw.worker,rest=_window$msw.rest;worker.use(rest.get("http://localhost:3000/api/v2/itemdata/",(function(req,res,ctx){var all=(0,toConsumableArray.Z)(mocks.w2),name="This is a mocked API response and will only be accurate for comic 666";return all.push({id:-1,name:name,shortName:name,count:0,type:"storyline",color:"ffaabb"}),res(ctx.json(all))})),rest.get("http://localhost:3000/api/v2/comicdata/:comicId",(function(req,res,ctx){if("666"===req.params.comicId)return res(ctx.delay(1e3+1e3*Math.random()),ctx.json(mocks.Je));var comic=(0,objectSpread2.Z)((0,objectSpread2.Z)({},mocks.Je),{},{items:[].concat((0,toConsumableArray.Z)(mocks.Je.items),[{id:-1,first:0,last:0,next:0,previous:0}])});return res(ctx.delay(1e3+1e3*Math.random()),ctx.json(comic))})),rest.get("http://localhost:3000/api/v2/comicdata/",(function(req,res,ctx){return res(ctx.json((0,mocks.Z7)(1e3)))})),rest.post("http://localhost:3000/api/v2/comicdata/additems",(function(req,res,ctx){return res(ctx.delay(1e3+1e3*Math.random()),ctx.text("Items added to comic"))})));return mswReady?(0,jsx_runtime.jsx)(CopyItemsDialog,(0,objectSpread2.Z)((0,objectSpread2.Z)({},args),{},{onClose:function onClose(){alert("In the userscript, this window would close now.")}})):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}.bind({});Default.args={show:!0},Default.parameters=(0,objectSpread2.Z)((0,objectSpread2.Z)({},Default.parameters),{},{docs:(0,objectSpread2.Z)((0,objectSpread2.Z)({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:(0,objectSpread2.Z)({originalSource:"args => {\n  const mswReady = useMswReady();\n  store.dispatch(apiSlice.util.resetApiState());\n\n  // Let's set up the Redux store to be the way we need\n  const state = store.getState();\n  if (!state.dialog.showCopyItemsDialogFor) {\n    store.dispatch(setShowCopyItemsDialog(666));\n  }\n  if (state.comic.current !== 667) {\n    store.dispatch(setCurrentComic(667));\n  }\n\n  // Then, let's fake the necessary REST calls\n  const {\n    worker,\n    rest\n  } = window.msw;\n  worker.use(rest.get('http://localhost:3000/api/v2/itemdata/', (req, res, ctx) => {\n    const all = [...ALL_ITEMS];\n    const name = 'This is a mocked API response and will only be accurate for comic 666';\n    all.push({\n      id: -1,\n      name,\n      shortName: name,\n      count: 0,\n      type: 'storyline',\n      color: 'ffaabb'\n    });\n    return res(ctx.json(all));\n  }), rest.get('http://localhost:3000/api/v2/comicdata/:comicId', (req, res, ctx) => {\n    const {\n      comicId\n    } = req.params;\n    if (comicId === '666') {\n      return res(ctx.delay(1000 + Math.random() * 1000), ctx.json(COMIC_DATA_666));\n    } else {\n      const comic: Comic = ({\n        ...COMIC_DATA_666,\n        items: [...(COMIC_DATA_666 as PresentComic).items, {\n          id: -1,\n          first: 0,\n          last: 0,\n          next: 0,\n          previous: 0\n        }]\n      } as any);\n      // We pretend this takes 1-2 seconds so we get to\n      // observe the loading UX\n      return res(ctx.delay(1000 + Math.random() * 1000), ctx.json(comic));\n    }\n  }), rest.get('http://localhost:3000/api/v2/comicdata/', (req, res, ctx) => {\n    return res(ctx.json(getComicListMocks(1000)));\n  }), rest.post('http://localhost:3000/api/v2/comicdata/additems', (req, res, ctx) => {\n    // We pretend this takes 1-2 seconds so we get to\n    // observe the loading UX\n    return res(ctx.delay(1000 + Math.random() * 1000), ctx.text('Items added to comic'));\n  }));\n  const onClose = () => {\n    alert('In the userscript, this window would close now.');\n  };\n  return mswReady ? <CopyItemsDialog {...args} onClose={onClose} /> : <></>;\n}"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2$=_Default$parameters2.docs)||void 0===_Default$parameters2$?void 0:_Default$parameters2$.source)})});var __namedExportsOrder=["Default"]},"./src/components/Button.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{g:function(){return PaddedButton}});var _home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["children","className"],_excluded2=["children","className"];function Button(_ref){var children=_ref.children,className=_ref.className,rest=(0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__.Z)(_ref,_excluded);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",(0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({className:"bg-qc-header hover:bg-qc-header-second focus:bg-qc-header-second text-white rounded-sm disabled:opacity-75"+(className?" ".concat(className):"")},rest),{},{children:children}))}function PaddedButton(_ref2){var children=_ref2.children,className=_ref2.className,rest=(0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__.Z)(_ref2,_excluded2);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Button,(0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)((0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_2__.Z)({className:"py-3 px-4"+(className?" ".concat(className):"")},rest),{},{children:children}))}try{Button.displayName="Button",Button.__docgenInfo={description:"",displayName:"Button",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Button.tsx#Button"]={docgenInfo:Button.__docgenInfo,name:"Button",path:"src/components/Button.tsx#Button"})}catch(__react_docgen_typescript_loader_error){}try{PaddedButton.displayName="PaddedButton",PaddedButton.__docgenInfo={description:"",displayName:"PaddedButton",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Button.tsx#PaddedButton"]={docgenInfo:PaddedButton.__docgenInfo,name:"PaddedButton",path:"src/components/Button.tsx#PaddedButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/Modals/ModalDialog/ModalDialog.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return ModalDialog}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");function ModalDialog(_ref){var header=_ref.header,body=_ref.body,footer=_ref.footer,onCloseClicked=_ref.onCloseClicked;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("dialog",{className:"p-0 border-none shadow-lg flex flex-col pointer-events-auto bg-white bg-clip-padding rounded-md outline-none text-current w-[800px] max-h-[90%] min-h-[10em]","aria-modal":!0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-shrink-0 items-center justify-between p-4 border-0 border-b border-solid border-gray-200 rounded-t-md",children:[header,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",className:"box-content w-4 h-4 p-1 text-black border-none rounded-none opacity-50 focus:shadow-none focus:outline-none focus:opacity-100 hover:text-black hover:opacity-75 hover:no-underline","aria-label":"Close",onClick:function onClick(){onCloseClicked&&onCloseClicked()},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("i",{className:"fa fa-times","aria-hidden":"true"})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"relative p-4 overflow-y-auto",children:body}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"modal-footer flex gap-2 flex-shrink-0 flex-wrap items-center justify-end p-4 border-0 border-t border-solid border-gray-200 rounded-b-md",children:footer})]})}try{ModalDialog.displayName="ModalDialog",ModalDialog.__docgenInfo={description:"",displayName:"ModalDialog",props:{header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"ReactNode"}},body:{defaultValue:null,description:"",name:"body",required:!0,type:{name:"ReactNode"}},footer:{defaultValue:null,description:"",name:"footer",required:!0,type:{name:"ReactNode"}},onCloseClicked:{defaultValue:null,description:"",name:"onCloseClicked",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Modals/ModalDialog/ModalDialog.tsx#ModalDialog"]={docgenInfo:ModalDialog.__docgenInfo,name:"ModalDialog",path:"src/components/Modals/ModalDialog/ModalDialog.tsx#ModalDialog"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/useHydratedItemData.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useHydratedItemData}});var _home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js"),_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_reduxjs_toolkit_dist_query__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/query/rtk-query.cjs.production.min.js"),_store_api_comicApiSlice__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/store/api/comicApiSlice.ts"),_store_api_itemApiSlice__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/store/api/itemApiSlice.ts"),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/utils.ts");function useHydratedItemData(currentComic,settings){var _useAllItemsQuery=(0,_store_api_itemApiSlice__WEBPACK_IMPORTED_MODULE_2__.HV)(),itemData=_useAllItemsQuery.data,isLoadingAllItems=_useAllItemsQuery.isLoading,isFetchingAllItems=_useAllItemsQuery.isFetching,isErrorAllItems=_useAllItemsQuery.isError,refetchAllItems=_useAllItemsQuery.refetch,_useGetComicDataQuery=(0,_store_api_comicApiSlice__WEBPACK_IMPORTED_MODULE_1__.Su)(0!==currentComic&&settings?(0,_store_api_comicApiSlice__WEBPACK_IMPORTED_MODULE_1__.rE)(currentComic,settings):_reduxjs_toolkit_dist_query__WEBPACK_IMPORTED_MODULE_4__.skipToken),comicData=_useGetComicDataQuery.data,isLoadingComicData=_useGetComicDataQuery.isLoading,isFetchingComicData=_useGetComicDataQuery.isFetching,isErrorComicData=_useGetComicDataQuery.isError,refetchComicData=_useGetComicDataQuery.refetch,_useMemo=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return itemData&&comicData?function hydrateItemData(comicData,itemData){var hydratedComicItemData,hydratedAllItemData;if(comicData.hasData){hydratedComicItemData=[];var _step,_iterator=(0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_6__.Z)(comicData.items);try{var _loop=function _loop(){var comicItem=_step.value,item=itemData.find((function(i){return i.id===comicItem.id}));if(!item)return(0,_utils__WEBPACK_IMPORTED_MODULE_3__.vU)("Item present in comic data but not item data!"),1;hydratedComicItemData.push((0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)((0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({},comicItem),item))};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}if(comicData.allItems){hydratedAllItemData=[];var _step2,_iterator2=(0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper_js__WEBPACK_IMPORTED_MODULE_6__.Z)(comicData.allItems);try{var _loop2=function _loop2(){var comicItem=_step2.value,item=itemData.find((function(i){return i.id===comicItem.id}));if(!item)return(0,_utils__WEBPACK_IMPORTED_MODULE_3__.vU)("Item present in comic data but not item data!"),1;hydratedAllItemData.push((0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)((0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_7__.Z)({},comicItem),item))};for(_iterator2.s();!(_step2=_iterator2.n()).done;)_loop2()}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}return[hydratedComicItemData,hydratedAllItemData]}(comicData,itemData):[void 0,void 0]}),[itemData,comicData]),_useMemo2=(0,_home_runner_work_client_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_5__.Z)(_useMemo,2);return{comicItems:_useMemo2[0],allItems:_useMemo2[1],isLoading:isLoadingAllItems||isLoadingComicData,isFetching:isFetchingAllItems||isFetchingComicData,isError:isErrorAllItems||isErrorComicData,refetch:function refetch(){refetchAllItems(),refetchComicData()}}}},"./src/store/hooks.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{C:function(){return useAppSelector},T:function(){return useAppDispatch}});var react_redux__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-redux/es/index.js"),useAppDispatch=function useAppDispatch(){return(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.I0)()},useAppSelector=react_redux__WEBPACK_IMPORTED_MODULE_0__.v9}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy1Db3B5SXRlbXNEaWFsb2ctQ29weUl0ZW1zRGlhbG9nLXN0b3JpZXMuNTU0MzE5MTMuaWZyYW1lLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoic1FBQ2UsU0FBU0EseUJBQXlCQyxPQUFRQyxVQUN2RCxHQUFjLE1BQVZELE9BQWdCLE1BQU8sQ0FBQyxFQUM1QixJQUNJRSxJQUFLQyxFQURMQyxPQ0hTLFNBQVNDLDhCQUE4QkwsT0FBUUMsVUFDNUQsR0FBYyxNQUFWRCxPQUFnQixNQUFPLENBQUMsRUFDNUIsSUFFSUUsSUFBS0MsRUFGTEMsT0FBUyxDQUFDLEVBQ1ZFLFdBQWFDLE9BQU9DLEtBQUtSLFFBRTdCLElBQUtHLEVBQUksRUFBR0EsRUFBSUcsV0FBV0csT0FBUU4sSUFDakNELElBQU1JLFdBQVdILEdBQ2JGLFNBQVNTLFFBQVFSLE1BQVEsSUFDN0JFLE9BQU9GLEtBQU9GLE9BQU9FLE1BRXZCLE9BQU9FLE1BQ1QsQ0RSZSxDQUE2QkosT0FBUUMsVUFFbEQsR0FBSU0sT0FBT0ksc0JBQXVCLENBQ2hDLElBQUlDLGlCQUFtQkwsT0FBT0ksc0JBQXNCWCxRQUNwRCxJQUFLRyxFQUFJLEVBQUdBLEVBQUlTLGlCQUFpQkgsT0FBUU4sSUFDdkNELElBQU1VLGlCQUFpQlQsR0FDbkJGLFNBQVNTLFFBQVFSLE1BQVEsR0FDeEJLLE9BQU9NLFVBQVVDLHFCQUFxQkMsS0FBS2YsT0FBUUUsT0FDeERFLE9BQU9GLEtBQU9GLE9BQU9FLEtBRXpCLENBQ0EsT0FBT0UsTUFDVCxDLG9tRUVKZSxTQUFTWSxnQkFBZUMsTUFNbkMsSUFBREMsTUFMQ0MsS0FBSUYsS0FBSkUsS0FDQUMsUUFBT0gsS0FBUEcsUUFLTUMsVUFBV0MsRUFBQUEsTUFBQUEsSUFBZSxTQUFDQyxPQUFLLE9BQUtBLE1BQU1GLFNBQVNHLE1BQU0sSUFFMURDLGNBQWVILEVBQUFBLE1BQUFBLElBQWUsU0FBQ0MsT0FBSyxPQUFLQSxNQUFNRyxNQUFNQyxPQUFPLElBQzVEQyxjQUFlTixFQUFB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Y2pELE1BQ2hELEVBUEEsSUFBQXNELFdBQUF6RixNQUFBd0YsT0FBQUMsV0FBQXhGLEtBQUFDLE1BQUF3RixRQU9DLE9BQUFyRixLQUFBb0YsV0FBQW5GLEVBQUFELElBQUEsU0FBQW9GLFdBQUFsRixHQUFBLENBQ0wsQ0FFQSxNQUFPLENBQUN5RSxzQkFBdUJDLG9CQUNuQyxDQW5EbUJGLENBQWdCTixVQUFXVixVQUUvQixNQUFDbEcsT0FBV0EsRUFDdkIsR0FBRyxDQUFDa0csU0FBVVUsWUFBV2tCLFdBQUEvRyxFQUFBQSxxSEFBQUEsR0FBQWtHLFNBQUEsR0FFekIsTUFBTyxDQUNIekYsV0Fid0JzRyxVQUFBLEdBY3hCSixTQWQ2Q0ksVUFBQSxHQWU3Q3ZILFVBQVc0RixtQkFBcUJVLG1CQUNoQ3hHLFdBQVkrRixvQkFBc0JVLG9CQUNsQ1IsUUFBU0QsaUJBQW1CVSxpQkFDNUJQLFFBQVMsU0FBQUEsVUFDTEQsa0JBQ0FTLGtCQUNKLEVBRVIsQyxtVUNsRWFlLGVBQWlCLFNBQWpCQSxpQkFBYyxPQUFTQyxFQUFBQSx5Q0FBQUEsS0FBMEIsRUFDakQzSSxlQUFrRDRJLHlDQUFBQSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcXVlc3Rpb25hYmxlLWNvbnRlbnQtc3BhLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzLmpzIiwid2VicGFjazovL3F1ZXN0aW9uYWJsZS1jb250ZW50LXNwYS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlLmpzIiwid2VicGFjazovL3F1ZXN0aW9uYWJsZS1jb250ZW50LXNwYS8uL3NyYy9jb21wb25lbnRzL0NvcHlJdGVtc0RpYWxvZy9Db3B5SXRlbXNEaWFsb2cudHN4Iiwid2VicGFjazovL3F1ZXN0aW9uYWJsZS1jb250ZW50LXNwYS8uL3NyYy9jb21wb25lbnRzL0J1dHRvbi50c3giLCJ3ZWJwYWNrOi8vcXVlc3Rpb25hYmxlLWNvbnRlbnQtc3BhLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxzL01vZGFsRGlhbG9nL01vZGFsRGlhbG9nLnRzeCIsIndlYnBhY2s6Ly9xdWVzdGlvbmFibGUtY29udGVudC1zcGEvLi9zcmMvaG9va3MvdXNlSHlkcmF0ZWRJdGVtRGF0YS50cyIsIndlYnBhY2s6Ly9xdWVzdGlvbmFibGUtY29udGVudC1zcGEvLi9zcmMvc3RvcmUvaG9va3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIi4vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSBvYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpO1xuICB2YXIga2V5LCBpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldO1xuICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaV07XG4gICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59IiwiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuXG5pbXBvcnQgeyBQYWRkZWRCdXR0b24gfSBmcm9tICdAY29tcG9uZW50cy9CdXR0b24nXG5pbXBvcnQgdXNlSHlkcmF0ZWRJdGVtRGF0YSBmcm9tICdAaG9va3MvdXNlSHlkcmF0ZWRJdGVtRGF0YSdcbmltcG9ydCBNb2RhbERpYWxvZyBmcm9tICdAbW9kYWxzL01vZGFsRGlhbG9nL01vZGFsRGlhbG9nJ1xuaW1wb3J0IHsgc2tpcFRva2VuIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdC9kaXN0L3F1ZXJ5J1xuaW1wb3J0IHsgdXNlQWRkSXRlbXNNdXRhdGlvbiwgdXNlTGlzdEFsbFF1ZXJ5IH0gZnJvbSAnQHN0b3JlL2FwaS9jb21pY0FwaVNsaWNlJ1xuaW1wb3J0IHsgdXNlQXBwU2VsZWN0b3IgfSBmcm9tICdAc3RvcmUvaG9va3MnXG5cbmltcG9ydCBDb3B5SXRlbXNEaWFsb2dQYW5lbCBmcm9tICcuL0NvcHlJdGVtc0RpYWxvZ1BhbmVsL0NvcHlJdGVtc0RpYWxvZ1BhbmVsJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb3B5SXRlbXNEaWFsb2coe1xuICAgIHNob3csXG4gICAgb25DbG9zZSxcbn06IHtcbiAgICBzaG93OiBib29sZWFuXG4gICAgb25DbG9zZTogKCkgPT4gdm9pZFxufSkge1xuICAgIGNvbnN0IHNldHRpbmdzID0gdXNlQXBwU2VsZWN0b3IoKHN0YXRlKSA9PiBzdGF0ZS5zZXR0aW5ncy52YWx1ZXMpXG5cbiAgICBjb25zdCBjdXJyZW50Q29taWMgPSB1c2VBcHBTZWxlY3Rvcigoc3RhdGUpID0+IHN0YXRlLmNvbWljLmN1cnJlbnQpXG4gICAgY29uc3QgaW5pdGlhbENvbWljID0gdXNlQXBwU2VsZWN0b3IoXG4gICAgICAgIChzdGF0ZSkgPT4gc3RhdGUuZGlhbG9nLnNob3dDb3B5SXRlbXNEaWFsb2dGb3JcbiAgICApXG5cbiAgICBjb25zdCB7XG4gICAgICAgIGRhdGE6IGFsbENvbWljRGF0YSxcbiAgICAgICAgaXNGZXRjaGluZzogaXNGZXRjaGluZ0FsbENvbWljRGF0YSxcbiAgICAgICAgaXNMb2FkaW5nOiBpc0xvYWRpbmdBbGxDb21pY0RhdGEsXG4gICAgfSA9IHVzZUxpc3RBbGxRdWVyeSghc2hvdyA/IHNraXBUb2tlbiA6IHVuZGVmaW5lZClcblxuICAgIGNvbnN0IHJldmVyc2VBbGxDb21pY0RhdGEgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgICAgaWYgKGFsbENvbWljRGF0YSkge1xuICAgICAgICAgICAgY29uc3QgcmV2ZXJzZUFsbENvbWljRGF0YSA9IFsuLi5hbGxDb21pY0RhdGFdXG4gICAgICAgICAgICByZXZlcnNlQWxsQ29taWNEYXRhLnJldmVyc2UoKVxuICAgICAgICAgICAgcmV0dXJuIHJldmVyc2VBbGxDb21pY0RhdGFcbiAgICAgICAgfVxuICAgIH0sIFthbGxDb21pY0RhdGFdKVxuXG4gICAgY29uc3QgW3ByZXZpb3VzSW5pdGlhbENvbWljLCBzZXRQcmV2aW91c0luaXRpYWxDb21pY10gPVxuICAgICAgICB1c2VTdGF0ZShpbml0aWFsQ29taWMpXG4gICAgY29uc3QgW3NlbGVjdGVkQ29taWMsIHNldFNlbGVjdGVkQ29taWNdID0gdXNlU3RhdGU8bnVtYmVyIHwgbnVsbD4oXG4gICAgICAgIHByZXZpb3VzSW5pdGlhbENvbWljXG4gICAgKVxuICAgIGlmIChwcmV2aW91c0luaXRpYWxDb21pYyAhPT0gaW5pdGlhbENvbWljKSB7XG4gICAgICAgIHNldFByZXZpb3VzSW5pdGlhbENvbWljKGluaXRpYWxDb21pYylcbiAgICAgICAgaWYgKGluaXRpYWxDb21pYykge1xuICAgICAgICAgICAgc2V0U2VsZWN0ZWRDb21pYyhpbml0aWFsQ29taWMgPiAxID8gaW5pdGlhbENvbWljIC0gMSA6IGluaXRpYWxDb21pYylcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIXNlbGVjdGVkQ29taWMgJiYgcmV2ZXJzZUFsbENvbWljRGF0YSkge1xuICAgICAgICBzZXRTZWxlY3RlZENvbWljKHJldmVyc2VBbGxDb21pY0RhdGFbMF0uY29taWMpXG4gICAgfVxuXG4gICAgY29uc3Qge1xuICAgICAgICBjb21pY0l0ZW1zLFxuICAgICAgICBpc0xvYWRpbmc6IGlzTG9hZGluZ0luaXRpYWxJdGVtRGF0YSxcbiAgICAgICAgaXNGZXRjaGluZzogaXNGZXRjaGluZ0l0ZW1EYXRhLFxuICAgIH0gPSB1c2VIeWRyYXRlZEl0ZW1EYXRhKHNlbGVjdGVkQ29taWMgPz8gMCwgc2V0dGluZ3MpXG5cbiAgICBjb25zdCBbc2VsZWN0ZWRJdGVtcywgc2V0U2VsZWN0ZWRJdGVtc10gPSB1c2VTdGF0ZTx7XG4gICAgICAgIFtpZDogbnVtYmVyXTogYm9vbGVhblxuICAgIH0+KHt9KVxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGxldCBzZWxlY3RlZEl0ZW1zOiB7IFtpZDogbnVtYmVyXTogYm9vbGVhbiB9ID0ge31cbiAgICAgICAgaWYgKGNvbWljSXRlbXMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBjb21pY0l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtc1tpdGVtLmlkXSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFNlbGVjdGVkSXRlbXMoc2VsZWN0ZWRJdGVtcylcbiAgICAgICAgfVxuICAgIH0sIFtjb21pY0l0ZW1zXSlcblxuICAgIGNvbnN0IFthZGRJdGVtcywgeyBpc0xvYWRpbmc6IGlzQWRkaW5nSXRlbXMgfV0gPSB1c2VBZGRJdGVtc011dGF0aW9uKClcblxuICAgIGNvbnN0IG9uQ29weSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbXNUb0FkZDogbnVtYmVyW10gPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gaW4gc2VsZWN0ZWRJdGVtcykge1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkSXRlbXNbaXRlbV0pIHtcbiAgICAgICAgICAgICAgICBpdGVtc1RvQWRkLnB1c2goTnVtYmVyKGl0ZW0pKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkZEl0ZW1zKHtcbiAgICAgICAgICAgIHRva2VuOiBzZXR0aW5ncyEuZWRpdE1vZGVUb2tlbixcbiAgICAgICAgICAgIGNvbWljSWQ6IGN1cnJlbnRDb21pYyxcbiAgICAgICAgICAgIGl0ZW1zOiBpdGVtc1RvQWRkLm1hcCgoaXRlbUlkKSA9PiAoe1xuICAgICAgICAgICAgICAgIG5ldzogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXRlbUlkLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICB9KVxuICAgICAgICBpZiAoJ2RhdGEnIGluIHJlc3VsdCkge1xuICAgICAgICAgICAgb25DbG9zZSgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8TW9kYWxEaWFsb2dcbiAgICAgICAgICAgIG9uQ2xvc2VDbGlja2VkPXtvbkNsb3NlfVxuICAgICAgICAgICAgaGVhZGVyPXtcbiAgICAgICAgICAgICAgICA8aDUgY2xhc3NOYW1lPVwibS0wIHRleHQteGwgZm9udC1tZWRpdW0gbGVhZGluZy1ub3JtYWwgdGV4dC1ncmF5LTgwMFwiPlxuICAgICAgICAgICAgICAgICAgICBDb3B5IGl0ZW1zIGZyb20gYW5vdGhlciBjb21pY1xuICAgICAgICAgICAgICAgIDwvaDU+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib2R5PXtcbiAgICAgICAgICAgICAgICA8Q29weUl0ZW1zRGlhbG9nUGFuZWxcbiAgICAgICAgICAgICAgICAgICAgYWxsQ29taWNzPXtyZXZlcnNlQWxsQ29taWNEYXRhfVxuICAgICAgICAgICAgICAgICAgICBpc0xvYWRpbmc9e1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nQWxsQ29taWNEYXRhIHx8IGlzTG9hZGluZ0luaXRpYWxJdGVtRGF0YVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlzRmV0Y2hpbmc9e1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNGZXRjaGluZ0FsbENvbWljRGF0YSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNGZXRjaGluZ0l0ZW1EYXRhIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0FkZGluZ0l0ZW1zXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDb21pYz17c2VsZWN0ZWRDb21pYyA/PyB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICAgIGNvbWljSXRlbXM9e2NvbWljSXRlbXN9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlU2VsZWN0ZWRDb21pYz17c2V0U2VsZWN0ZWRDb21pY31cbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcz17c2VsZWN0ZWRJdGVtc31cbiAgICAgICAgICAgICAgICAgICAgb25VcGRhdGVTZWxlY3RlZEl0ZW1zPXtzZXRTZWxlY3RlZEl0ZW1zfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb290ZXI9e1xuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICAgIDxQYWRkZWRCdXR0b24gb25DbGljaz17b25Db3B5fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIENvcHkgc2VsZWN0ZWQgaW50byBjdXJyZW50IGNvbWljXG4gICAgICAgICAgICAgICAgICAgIDwvUGFkZGVkQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8UGFkZGVkQnV0dG9uIG9uQ2xpY2s9e29uQ2xvc2V9PkNsb3NlPC9QYWRkZWRCdXR0b24+XG4gICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgKVxufVxuIiwiZXhwb3J0IHR5cGUgQnV0dG9uUHJvcHMgPSB7XG4gICAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZVxuICAgIGNsYXNzTmFtZT86IHN0cmluZ1xufSAmIFJlYWN0LkRldGFpbGVkSFRNTFByb3BzPFxuICAgIFJlYWN0LkJ1dHRvbkhUTUxBdHRyaWJ1dGVzPEhUTUxCdXR0b25FbGVtZW50PixcbiAgICBIVE1MQnV0dG9uRWxlbWVudFxuPlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQnV0dG9uKHsgY2hpbGRyZW4sIGNsYXNzTmFtZSwgLi4ucmVzdCB9OiBCdXR0b25Qcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgICAgICAgICAgJ2JnLXFjLWhlYWRlciBob3ZlcjpiZy1xYy1oZWFkZXItc2Vjb25kIGZvY3VzOmJnLXFjLWhlYWRlci1zZWNvbmQgdGV4dC13aGl0ZSByb3VuZGVkLXNtIGRpc2FibGVkOm9wYWNpdHktNzUnICtcbiAgICAgICAgICAgICAgICAoY2xhc3NOYW1lID8gYCAke2NsYXNzTmFtZX1gIDogJycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgPlxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L2J1dHRvbj5cbiAgICApXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQYWRkZWRCdXR0b24oeyBjaGlsZHJlbiwgY2xhc3NOYW1lLCAuLi5yZXN0IH06IEJ1dHRvblByb3BzKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgY2xhc3NOYW1lPXsncHktMyBweC00JyArIChjbGFzc05hbWUgPyBgICR7Y2xhc3NOYW1lfWAgOiAnJyl9XG4gICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgPlxuICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L0J1dHRvbj5cbiAgICApXG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNb2RhbERpYWxvZyh7XG4gICAgaGVhZGVyLFxuICAgIGJvZHksXG4gICAgZm9vdGVyLFxuICAgIG9uQ2xvc2VDbGlja2VkLFxufToge1xuICAgIGhlYWRlcjogUmVhY3QuUmVhY3ROb2RlXG4gICAgYm9keTogUmVhY3QuUmVhY3ROb2RlXG4gICAgZm9vdGVyOiBSZWFjdC5SZWFjdE5vZGVcbiAgICBvbkNsb3NlQ2xpY2tlZD86ICgpID0+IHZvaWRcbn0pIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGlhbG9nXG4gICAgICAgICAgICBjbGFzc05hbWU9e1xuICAgICAgICAgICAgICAgICdwLTAgYm9yZGVyLW5vbmUgc2hhZG93LWxnIGZsZXggZmxleC1jb2wgJyArXG4gICAgICAgICAgICAgICAgJ3BvaW50ZXItZXZlbnRzLWF1dG8gJyArXG4gICAgICAgICAgICAgICAgJ2JnLXdoaXRlIGJnLWNsaXAtcGFkZGluZyByb3VuZGVkLW1kIG91dGxpbmUtbm9uZSB0ZXh0LWN1cnJlbnQgdy1bODAwcHhdIG1heC1oLVs5MCVdIG1pbi1oLVsxMGVtXSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyaWEtbW9kYWxcbiAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtc2hyaW5rLTAgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTQgYm9yZGVyLTAgYm9yZGVyLWIgYm9yZGVyLXNvbGlkIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLXQtbWRcIj5cbiAgICAgICAgICAgICAgICB7aGVhZGVyfVxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJveC1jb250ZW50IHctNCBoLTQgcC0xIHRleHQtYmxhY2sgYm9yZGVyLW5vbmUgcm91bmRlZC1ub25lIG9wYWNpdHktNTAgZm9jdXM6c2hhZG93LW5vbmUgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOm9wYWNpdHktMTAwIGhvdmVyOnRleHQtYmxhY2sgaG92ZXI6b3BhY2l0eS03NSBob3Zlcjpuby11bmRlcmxpbmVcIlxuICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVwiQ2xvc2VcIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25DbG9zZUNsaWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlQ2xpY2tlZCgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS10aW1lc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSBwLTQgb3ZlcmZsb3cteS1hdXRvXCI+e2JvZHl9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLWZvb3RlciBmbGV4IGdhcC0yIGZsZXgtc2hyaW5rLTAgZmxleC13cmFwIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWVuZCBwLTQgYm9yZGVyLTAgYm9yZGVyLXQgYm9yZGVyLXNvbGlkIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWItbWRcIj5cbiAgICAgICAgICAgICAgICB7Zm9vdGVyfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGlhbG9nPlxuICAgIClcbn1cbiIsImltcG9ydCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCdcblxuaW1wb3J0IHsgQ29taWMgfSBmcm9tICdAbW9kZWxzL0NvbWljJ1xuaW1wb3J0IHsgQ29taWNJZCB9IGZyb20gJ0Btb2RlbHMvQ29taWNJZCdcbmltcG9ydCB7IEh5ZHJhdGVkSXRlbU5hdmlnYXRpb25EYXRhIH0gZnJvbSAnQG1vZGVscy9IeWRyYXRlZEl0ZW1EYXRhJ1xuaW1wb3J0IHsgSXRlbUxpc3QgfSBmcm9tICdAbW9kZWxzL0l0ZW1MaXN0J1xuaW1wb3J0IHsgc2tpcFRva2VuIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdC9kaXN0L3F1ZXJ5J1xuaW1wb3J0IHtcbiAgICB0b0dldERhdGFRdWVyeUFyZ3MsXG4gICAgdXNlR2V0Q29taWNEYXRhUXVlcnksXG59IGZyb20gJ0BzdG9yZS9hcGkvY29taWNBcGlTbGljZSdcbmltcG9ydCB7IHVzZUFsbEl0ZW1zUXVlcnkgfSBmcm9tICdAc3RvcmUvYXBpL2l0ZW1BcGlTbGljZSdcblxuaW1wb3J0IHsgU2V0dGluZ1ZhbHVlcyB9IGZyb20gJ34vc2V0dGluZ3MnXG5pbXBvcnQgeyBlcnJvciB9IGZyb20gJ34vdXRpbHMnXG5cbmV4cG9ydCB0eXBlIEh5ZHJhdGVkSXRlbURhdGEgPSB7XG4gICAgY29taWNJdGVtcz86IEh5ZHJhdGVkSXRlbU5hdmlnYXRpb25EYXRhW11cbiAgICBhbGxJdGVtcz86IEh5ZHJhdGVkSXRlbU5hdmlnYXRpb25EYXRhW11cbiAgICBpc0xvYWRpbmc6IGJvb2xlYW5cbiAgICBpc0ZldGNoaW5nOiBib29sZWFuXG4gICAgcmVmZXRjaDogKCkgPT4gdm9pZFxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VIeWRyYXRlZEl0ZW1EYXRhKFxuICAgIGN1cnJlbnRDb21pYzogQ29taWNJZCxcbiAgICBzZXR0aW5nczogU2V0dGluZ1ZhbHVlcyB8IG51bGxcbikge1xuICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YTogaXRlbURhdGEsXG4gICAgICAgIGlzTG9hZGluZzogaXNMb2FkaW5nQWxsSXRlbXMsXG4gICAgICAgIGlzRmV0Y2hpbmc6IGlzRmV0Y2hpbmdBbGxJdGVtcyxcbiAgICAgICAgaXNFcnJvcjogaXNFcnJvckFsbEl0ZW1zLFxuICAgICAgICByZWZldGNoOiByZWZldGNoQWxsSXRlbXMsXG4gICAgfSA9IHVzZUFsbEl0ZW1zUXVlcnkoKVxuXG4gICAgY29uc3Qge1xuICAgICAgICBkYXRhOiBjb21pY0RhdGEsXG4gICAgICAgIGlzTG9hZGluZzogaXNMb2FkaW5nQ29taWNEYXRhLFxuICAgICAgICBpc0ZldGNoaW5nOiBpc0ZldGNoaW5nQ29taWNEYXRhLFxuICAgICAgICBpc0Vycm9yOiBpc0Vycm9yQ29taWNEYXRhLFxuICAgICAgICByZWZldGNoOiByZWZldGNoQ29taWNEYXRhLFxuICAgIH0gPSB1c2VHZXRDb21pY0RhdGFRdWVyeShcbiAgICAgICAgY3VycmVudENvbWljID09PSAwIHx8ICFzZXR0aW5nc1xuICAgICAgICAgICAgPyBza2lwVG9rZW5cbiAgICAgICAgICAgIDogdG9HZXREYXRhUXVlcnlBcmdzKGN1cnJlbnRDb21pYywgc2V0dGluZ3MpXG4gICAgKVxuXG4gICAgY29uc3QgW2h5ZHJhdGVkQ29taWNJdGVtRGF0YSwgaHlkcmF0ZWRBbGxJdGVtRGF0YV0gPSB1c2VNZW1vPFxuICAgICAgICBbXG4gICAgICAgICAgICBIeWRyYXRlZEl0ZW1OYXZpZ2F0aW9uRGF0YVtdIHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgSHlkcmF0ZWRJdGVtTmF2aWdhdGlvbkRhdGFbXSB8IHVuZGVmaW5lZCxcbiAgICAgICAgXVxuICAgID4oKCkgPT4ge1xuICAgICAgICBpZiAoaXRlbURhdGEgJiYgY29taWNEYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gaHlkcmF0ZUl0ZW1EYXRhKGNvbWljRGF0YSwgaXRlbURhdGEpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFt1bmRlZmluZWQsIHVuZGVmaW5lZF1cbiAgICB9LCBbaXRlbURhdGEsIGNvbWljRGF0YV0pXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjb21pY0l0ZW1zOiBoeWRyYXRlZENvbWljSXRlbURhdGEsXG4gICAgICAgIGFsbEl0ZW1zOiBoeWRyYXRlZEFsbEl0ZW1EYXRhLFxuICAgICAgICBpc0xvYWRpbmc6IGlzTG9hZGluZ0FsbEl0ZW1zIHx8IGlzTG9hZGluZ0NvbWljRGF0YSxcbiAgICAgICAgaXNGZXRjaGluZzogaXNGZXRjaGluZ0FsbEl0ZW1zIHx8IGlzRmV0Y2hpbmdDb21pY0RhdGEsXG4gICAgICAgIGlzRXJyb3I6IGlzRXJyb3JBbGxJdGVtcyB8fCBpc0Vycm9yQ29taWNEYXRhLFxuICAgICAgICByZWZldGNoOiAoKSA9PiB7XG4gICAgICAgICAgICByZWZldGNoQWxsSXRlbXMoKVxuICAgICAgICAgICAgcmVmZXRjaENvbWljRGF0YSgpXG4gICAgICAgIH0sXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaHlkcmF0ZUl0ZW1EYXRhKFxuICAgIGNvbWljRGF0YTogQ29taWMsXG4gICAgaXRlbURhdGE6IEl0ZW1MaXN0W11cbik6IFtcbiAgICBIeWRyYXRlZEl0ZW1OYXZpZ2F0aW9uRGF0YVtdIHwgdW5kZWZpbmVkLFxuICAgIEh5ZHJhdGVkSXRlbU5hdmlnYXRpb25EYXRhW10gfCB1bmRlZmluZWQsXG5dIHtcbiAgICBsZXQgaHlkcmF0ZWRDb21pY0l0ZW1EYXRhOiBIeWRyYXRlZEl0ZW1OYXZpZ2F0aW9uRGF0YVtdIHwgdW5kZWZpbmVkXG4gICAgaWYgKGNvbWljRGF0YS5oYXNEYXRhKSB7XG4gICAgICAgIGh5ZHJhdGVkQ29taWNJdGVtRGF0YSA9IFtdXG4gICAgICAgIGZvciAoY29uc3QgY29taWNJdGVtIG9mIGNvbWljRGF0YS5pdGVtcykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1EYXRhLmZpbmQoKGkpID0+IGkuaWQgPT09IGNvbWljSXRlbS5pZClcbiAgICAgICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgICAgICAgIGVycm9yKCdJdGVtIHByZXNlbnQgaW4gY29taWMgZGF0YSBidXQgbm90IGl0ZW0gZGF0YSEnKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoeWRyYXRlZENvbWljSXRlbURhdGEucHVzaCh7IC4uLmNvbWljSXRlbSwgLi4uaXRlbSB9KVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBoeWRyYXRlZEFsbEl0ZW1EYXRhOiBIeWRyYXRlZEl0ZW1OYXZpZ2F0aW9uRGF0YVtdIHwgdW5kZWZpbmVkXG4gICAgaWYgKGNvbWljRGF0YS5hbGxJdGVtcykge1xuICAgICAgICBoeWRyYXRlZEFsbEl0ZW1EYXRhID0gW11cbiAgICAgICAgZm9yIChjb25zdCBjb21pY0l0ZW0gb2YgY29taWNEYXRhLmFsbEl0ZW1zKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gaXRlbURhdGEuZmluZCgoaSkgPT4gaS5pZCA9PT0gY29taWNJdGVtLmlkKVxuICAgICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IoJ0l0ZW0gcHJlc2VudCBpbiBjb21pYyBkYXRhIGJ1dCBub3QgaXRlbSBkYXRhIScpXG4gICAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGh5ZHJhdGVkQWxsSXRlbURhdGEucHVzaCh7IC4uLmNvbWljSXRlbSwgLi4uaXRlbSB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFtoeWRyYXRlZENvbWljSXRlbURhdGEsIGh5ZHJhdGVkQWxsSXRlbURhdGFdXG59XG4iLCJpbXBvcnQgeyBUeXBlZFVzZVNlbGVjdG9ySG9vaywgdXNlRGlzcGF0Y2gsIHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnXG5cbmltcG9ydCB0eXBlIHsgQXBwRGlzcGF0Y2gsIFJvb3RTdGF0ZSB9IGZyb20gJy4vc3RvcmUnXG5cbi8vIFVzZSB0aHJvdWdob3V0IHlvdXIgYXBwIGluc3RlYWQgb2YgcGxhaW4gYHVzZURpc3BhdGNoYCBhbmQgYHVzZVNlbGVjdG9yYFxuZXhwb3J0IGNvbnN0IHVzZUFwcERpc3BhdGNoID0gKCkgPT4gdXNlRGlzcGF0Y2g8QXBwRGlzcGF0Y2g+KClcbmV4cG9ydCBjb25zdCB1c2VBcHBTZWxlY3RvcjogVHlwZWRVc2VTZWxlY3Rvckhvb2s8Um9vdFN0YXRlPiA9IHVzZVNlbGVjdG9yXG4iXSwibmFtZXMiOlsiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIiwic291cmNlIiwiZXhjbHVkZWQiLCJrZXkiLCJpIiwidGFyZ2V0IiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UiLCJzb3VyY2VLZXlzIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJzb3VyY2VTeW1ib2xLZXlzIiwicHJvdG90eXBlIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJjYWxsIiwiQ29weUl0ZW1zRGlhbG9nIiwiX3JlZiIsIl9yZWYyIiwic2hvdyIsIm9uQ2xvc2UiLCJzZXR0aW5ncyIsInVzZUFwcFNlbGVjdG9yIiwic3RhdGUiLCJ2YWx1ZXMiLCJjdXJyZW50Q29taWMiLCJjb21pYyIsImN1cnJlbnQiLCJpbml0aWFsQ29taWMiLCJkaWFsb2ciLCJzaG93Q29weUl0ZW1zRGlhbG9nRm9yIiwiX3VzZUxpc3RBbGxRdWVyeSIsInVzZUxpc3RBbGxRdWVyeSIsInVuZGVmaW5lZCIsInNraXBUb2tlbiIsImFsbENvbWljRGF0YSIsImRhdGEiLCJpc0ZldGNoaW5nQWxsQ29taWNEYXRhIiwiaXNGZXRjaGluZyIsImlzTG9hZGluZ0FsbENvbWljRGF0YSIsImlzTG9hZGluZyIsInJldmVyc2VBbGxDb21pY0RhdGEiLCJ1c2VNZW1vIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwicmV2ZXJzZSIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5IiwicHJldmlvdXNJbml0aWFsQ29taWMiLCJzZXRQcmV2aW91c0luaXRpYWxDb21pYyIsIl91c2VTdGF0ZTMiLCJfdXNlU3RhdGU0Iiwic2VsZWN0ZWRDb21pYyIsInNldFNlbGVjdGVkQ29taWMiLCJfdXNlSHlkcmF0ZWRJdGVtRGF0YSIsInVzZUh5ZHJhdGVkSXRlbURhdGEiLCJjb21pY0l0ZW1zIiwiaXNMb2FkaW5nSW5pdGlhbEl0ZW1EYXRhIiwiaXNGZXRjaGluZ0l0ZW1EYXRhIiwiX3VzZVN0YXRlNSIsIl91c2VTdGF0ZTYiLCJzZWxlY3RlZEl0ZW1zIiwic2V0U2VsZWN0ZWRJdGVtcyIsInVzZUVmZmVjdCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJzIiwibiIsImRvbmUiLCJ2YWx1ZSIsImlkIiwiZXJyIiwiZSIsImYiLCJfdXNlQWRkSXRlbXNNdXRhdGlvbiIsInVzZUFkZEl0ZW1zTXV0YXRpb24iLCJfdXNlQWRkSXRlbXNNdXRhdGlvbjIiLCJhZGRJdGVtcyIsImlzQWRkaW5nSXRlbXMiLCJfanN4IiwiTW9kYWxEaWFsb2ciLCJvbkNsb3NlQ2xpY2tlZCIsImhlYWRlciIsImNsYXNzTmFtZSIsImNoaWxkcmVuIiwiYm9keSIsIkNvcHlJdGVtc0RpYWxvZ1BhbmVsIiwiYWxsQ29taWNzIiwib25DaGFuZ2VTZWxlY3RlZENvbWljIiwib25VcGRhdGVTZWxlY3RlZEl0ZW1zIiwiZm9vdGVyIiwiX2pzeHMiLCJfRnJhZ21lbnQiLCJQYWRkZWRCdXR0b24iLCJvbkNsaWNrIiwib25Db3B5IiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJfcmVnZW5lcmF0b3JSdW50aW1lIiwibWFyayIsIl9jYWxsZWUiLCJpdGVtc1RvQWRkIiwiaXRlbSIsIndyYXAiLCJfY2FsbGVlJCIsIl9jb250ZXh0IiwicHJldiIsIm5leHQiLCJwdXNoIiwiTnVtYmVyIiwidG9rZW4iLCJlZGl0TW9kZVRva2VuIiwiY29taWNJZCIsIml0ZW1zIiwibWFwIiwiaXRlbUlkIiwibmV3Iiwic2VudCIsInN0b3AiLCJhcHBseSIsImFyZ3VtZW50cyIsIkJ1dHRvbiIsInJlc3QiLCJfZXhjbHVkZWQiLCJfb2JqZWN0U3ByZWFkIiwiY29uY2F0IiwiX2V4Y2x1ZGVkMiIsInR5cGUiLCJfdXNlQWxsSXRlbXNRdWVyeSIsInVzZUFsbEl0ZW1zUXVlcnkiLCJpdGVtRGF0YSIsImlzTG9hZGluZ0FsbEl0ZW1zIiwiaXNGZXRjaGluZ0FsbEl0ZW1zIiwiaXNFcnJvckFsbEl0ZW1zIiwiaXNFcnJvciIsInJlZmV0Y2hBbGxJdGVtcyIsInJlZmV0Y2giLCJfdXNlR2V0Q29taWNEYXRhUXVlcnkiLCJ1c2VHZXRDb21pY0RhdGFRdWVyeSIsInRvR2V0RGF0YVF1ZXJ5QXJncyIsImNvbWljRGF0YSIsImlzTG9hZGluZ0NvbWljRGF0YSIsImlzRmV0Y2hpbmdDb21pY0RhdGEiLCJpc0Vycm9yQ29taWNEYXRhIiwicmVmZXRjaENvbWljRGF0YSIsIl91c2VNZW1vIiwiaHlkcmF0ZUl0ZW1EYXRhIiwiaHlkcmF0ZWRDb21pY0l0ZW1EYXRhIiwiaHlkcmF0ZWRBbGxJdGVtRGF0YSIsImhhc0RhdGEiLCJfbG9vcCIsImNvbWljSXRlbSIsImZpbmQiLCJlcnJvciIsImFsbEl0ZW1zIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsIl9sb29wMiIsIl91c2VNZW1vMiIsInVzZUFwcERpc3BhdGNoIiwidXNlRGlzcGF0Y2giLCJ1c2VTZWxlY3RvciJdLCJzb3VyY2VSb290IjoiIn0=